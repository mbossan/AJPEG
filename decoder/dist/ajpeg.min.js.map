{"version":3,"sources":["node_modules/browser-pack/_prelude.js","decoder/js/Main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","loadImage","src","cb","img","Image","loaded","onload","AJPEG","window","config","self","this","mask","load","onAllLoaded","bind","replace","toDataURL","toCanvas","canvas","imagecanvas","document","createElement","imagecontext","getContext","width","height","drawImage","globalCompositeOperation","parse","attr","setTimeout","ims","querySelectorAll","attributes","value","canvases"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,EAAAU,EAAAJ,iBCAC,WA4DG,QAASK,GAAUC,EAAKC,GACpB,GAAIC,GAAM,GAAIC,MAOd,OANAD,GAAIE,QAAS,EACbF,EAAIG,OAAS,WACTH,EAAIE,QAAS,EACbH,KAEJC,EAAIF,IAAMA,EACHE,EAnEX,GAAII,GAAQC,OAAOD,MAAQ,SAAUE,GACjC,GAAIC,GAAOC,IACXD,GAAKP,IAAM,KACXO,EAAKE,KAAO,KAEZF,EAAKG,KAAO,SAAUZ,EAAKC,GACvB,QAASY,KACAJ,EAAKE,KAAKP,QAAWK,EAAKP,IAAIE,QAGlB,kBAANH,IACPA,EAAGN,KAAKc,GAGhBA,EAAKP,IAAMH,EAAUC,EAAKa,EAAYC,KAAKL,IAC3CA,EAAKE,KAAOZ,EAAUC,EAAIe,QAAQ,OAAQ,aAAcF,EAAYC,KAAKL,KAG7EA,EAAKO,UAAY,WACb,MAAOP,GAAKQ,WAAWD,aAG3BP,EAAKQ,SAAW,SAAUC,GACtB,GAAIC,GAAcD,GAAUE,SAASC,cAAc,UAC/CC,EAAeH,EAAYI,WAAW,KAQ1C,OANAJ,GAAYK,MAAQf,EAAKP,IAAIsB,MAC7BL,EAAYM,OAAShB,EAAKP,IAAIuB,OAE9BH,EAAaI,UAAUjB,EAAKE,KAAM,EAAG,EAAGF,EAAKP,IAAIsB,MAAOf,EAAKP,IAAIuB,QACjEH,EAAaK,yBAA2B,cACxCL,EAAaI,UAAUjB,EAAKP,IAAK,EAAG,GAC7BiB,GAKfb,GAAMsB,MAAQ,SAAUC,GACD,mBAARA,IAAwBA,IAC/BA,EAAO,aACXC,WAAW,WAEP,IAAK,GADqD5B,GAAtD6B,EAAMX,SAASY,iBAAiB,OAASH,EAAO,KAC3CxC,EAAI,EAAGA,EAAI0C,EAAInC,OAAQP,IAC5Ba,EAAM6B,EAAI1C,IACV,GAAIiB,IAAQM,KAAKmB,EAAI1C,GAAG4C,WAAWJ,GAAMK,MAAO,WAC5ChC,EAAIF,IAAMU,KAAKM,aAIvB,KAAK,GAD6DE,GAA9DiB,EAAWf,SAASY,iBAAiB,UAAYH,EAAO,KACnDxC,EAAI,EAAGA,EAAI8C,EAASvC,OAAQP,IACjC6B,EAASiB,EAAS9C,IAClB,GAAIiB,IAAQM,KAAKM,EAAOe,WAAWJ,GAAMK,MAAO,WAC5CxB,KAAKO,SAASC,QAmBT,mBAAVpB,KACPA,EAAOJ,QAAUY","file":"ajpeg.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function () {\n    var AJPEG = window.AJPEG = function (config) {\n        var self = this;\n        self.img = null;\n        self.mask = null;\n\n        self.load = function (src, cb) {\n            function onAllLoaded() {\n                if (!self.mask.loaded || !self.img.loaded)\n                    return;\n\n                if (typeof cb == \"function\")\n                    cb.call(self);\n            }\n\n            self.img = loadImage(src, onAllLoaded.bind(self));\n            self.mask = loadImage(src.replace('.jpg', \"@mask.png\"), onAllLoaded.bind(self));\n        };\n\n        self.toDataURL = function () {\n            return self.toCanvas().toDataURL();\n        };\n\n        self.toCanvas = function (canvas) {\n            var imagecanvas = canvas || document.createElement('canvas');\n            var imagecontext = imagecanvas.getContext('2d');\n\n            imagecanvas.width = self.img.width;\n            imagecanvas.height = self.img.height;\n\n            imagecontext.drawImage(self.mask, 0, 0, self.img.width, self.img.height);\n            imagecontext.globalCompositeOperation = 'source-atop';\n            imagecontext.drawImage(self.img, 0, 0);\n            return imagecanvas;\n        };\n    };\n\n    //STATIC\n    AJPEG.parse = function (attr) {\n        if (typeof attr == \"undefined\" || !attr)\n            attr = 'alpha-src';\n        setTimeout(function () {\n            var ims = document.querySelectorAll('img[' + attr + ']'), img;\n            for (var i = 0; i < ims.length; i++) {\n                img = ims[i];\n                new AJPEG().load(ims[i].attributes[attr].value, function () {\n                    img.src = this.toDataURL();\n                })\n            }\n            var canvases = document.querySelectorAll('canvas[' + attr + ']'), canvas;\n            for (var i = 0; i < canvases.length; i++) {\n                canvas = canvases[i];\n                new AJPEG().load(canvas.attributes[attr].value, function(){\n                    this.toCanvas(canvas);\n                });\n            }\n\n        });\n    };\n\n    function loadImage(src, cb) {\n        var img = new Image();\n        img.loaded = false;\n        img.onload = function () {\n            img.loaded = true;\n            cb();\n        }\n        img.src = src;\n        return img;\n    }\n\n\n    if (typeof module != \"undefined\")\n        module.exports = AJPEG;\n\n}());"],"sourceRoot":"/source/"}